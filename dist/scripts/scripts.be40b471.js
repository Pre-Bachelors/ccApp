"use strict";angular.module("ccApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","rzModule"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("ccApp").factory("Quiz",["$http",function(a){var b={},c={decodeHtml:function(a){var b=document.createElement("textarea");return b.innerHTML=a,b.value}};return b.entries=[{subject:"Maths",prompt:"How strong are your math and science skills?",value:0,sliderLevels:["Unworkable","Okay","Good","Strong","Excellent"],equiv:"requiresQuantitativeSkills"},{subject:"Writing and Speaking",prompt:"How good are you at writing and speaking?",value:0,sliderLevels:["Unworkable","Okay","Good","Pretty good","Excellent"],equiv:"requiresVerbalAndSocialSkills"},{subject:"Competitive",prompt:"What level of competitiveness are your comfortable with?",value:0,sliderLevels:["None","A small amount","A reasonable amount","Some","A big amount"],equiv:"easeOfCompetition"},{subject:"Uncertain",prompt:"How open do you want to keep your options?",value:0,sliderLevels:["Not much","Reasonably open","Open","Very open","Maximize options"],equiv:"optionValue"}],a.get("scripts/career_profiles.json").then(function(a){b.careers=a.data,b.careers.forEach(function(a){a.title=c.decodeHtml(a.title),a.custom_fields.easeOfCompetition=6-a.custom_fields.easeOfCompetition,a.thumbnail_url=c.decodeHtml(a.featured_image.attachment_meta.sizes.thumbnail.url),a.custom_fields.summaryHtml=c.decodeHtml(a.custom_fields.summaryHtml)}),b.receivedFlag=!0},function(){alert("error!")}),b.careerSuitable=function(a,b,c){return"Competitive"==c?b>4||4==b&&5>a||3==b&&4>a||2==b&&3>a||2>a:"Uncertain"==c?3>b||5==b&&3>a||5>a:b>3||3==b&&5>a||3>b&&4>a},b.updateCareers=function(a){b.careers.forEach(function(a){a.show=!0}),a.forEach(function(a){b.careers?b.careers.forEach(function(c){if(c.show){var d=parseInt(c.custom_fields[a.equiv]),e=a.value+1;c.show=b.careerSuitable(d,e,a.subject)}}):console.log("no careers")})},b}]),angular.module("ccApp").controller("MainCtrl",["$scope","Quiz",function(a,b){a.entries=b.entries,a.careers=b.careers,a.btn={hide:!0,limit:5},a.entries.forEach(function(c){c.sliderConfig={ceil:5,floor:1,hideLimitLabels:!0,stepsArray:c.sliderLevels,onChange:function(){b.careers&&(b.updateCareers(a.entries),a.careers=[],b.careers.forEach(function(b){b.show&&a.careers.push(b)}),a.careers.sort(function(b,c){if(b.custom_fields.careerCapital<c.custom_fields.careerCapital)return 1;if(b.custom_fields.careerCapital>c.custom_fields.careerCapital)return-1;if(b.custom_fields.careerCapital==c.custom_fields.careerCapital){if(4==a.entries[0].value){if(b.custom_fields.requiresQuantitativeSkills>c.custom_fields.requiresQuantitativeSkills)return-1;if(b.custom_fields.requiresQuantitativeSkills<c.custom_fields.requiresQuantitativeSkills)return 1}if(4==a.entries[1].value){if(b.custom_fields.requiresVerbalAndSocialSkills>c.custom_fields.requiresVerbalAndSocialSkills)return-1;if(b.custom_fields.requiresVerbalAndSocialSkills<c.custom_fields.requiresVerbalAndSocialSkills)return 1}}return 0}))}}}),a.$watch("careers",function(){a.btn.hide=!(a.btn.limit<=a.careers.length)}),a.$watch("btn.limit",function(){a.btn.hide=!(a.btn.limit<=a.careers.length)})}]),angular.module("ccApp").run(["$templateCache",function(a){a.put("views/main.html",'<div> <article ng-repeat="entry in entries"> <h3>{{entry.prompt}}</h3> <rzslider rz-slider-model="entry.value" rz-slider-options="entry.sliderConfig"></rzslider> </article> <div id="results"> <hr> <article ng-repeat="career in careers | limitTo: btn.limit"> <h2>{{career.title}} </h2> <img src="{{career.thumbnail_url}}"> <p ng-bind-html="career.custom_fields.summaryHtml"></p> <p><strong>Key facts on fit: </strong><span ng-bind-html="career.custom_fields.keyFactsOnFit"></span></p> <div style="clear: both"></div> </article> </div> <button class="btn btn-primary center-block" ng-hide="btn.hide" ng-click="btn.limit = btn.limit + 10">Show more</button> </div>')}]);